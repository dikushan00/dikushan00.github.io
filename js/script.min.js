"use strict";
$(".main_btn").on("click", function (e) {
    e.preventDefault()
}), $("a").on("click", function (e) {
    e.preventDefault()
}), $(".swipe_btn").click(function () {
    return $("html, body").animate({
        scrollTop: 0
    }, 500), !1
}), $('a[href*="#"]').on("click", function (e) {
    $("html,body").animate({
        scrollTop: $($(this).attr("href")).offset().top + 3
    }, 1200)
}), $(".header_card_link").on("click", function (e) {
    e.preventDefault(), $(".basket_drop").fadeToggle()
}), $("#contact_content_form_table").on("click", function () {
    $("#res_table").fadeToggle(700)
}), $(document).on("scroll", function () {
    var e = $(this).scrollTop();
    e >= 120 ? ($(".header_card").addClass("fixed"), $(".header").addClass("fixed"), $(".header_card").addClass("fixed")) : ($(".header_card").removeClass("fixed"), $(".header").removeClass("fixed"), $(".header_card").removeClass("fixed")), e >= 500 ? $(".swipe_btn").fadeIn(400) : $(".swipe_btn").fadeOut(400)
}), AOS.init({
    disable: !1,
    startEvent: "DOMContentLoaded",
    initClassName: "aos-init",
    animatedClassName: "aos-animate",
    useClassNames: !1,
    disableMutationObserver: !1,
    debounceDelay: 50,
    throttleDelay: 99,
    offset: 100,
    delay: 3,
    duration: 1500,
    easing: "ease",
    once: !0,
    mirror: !1,
    anchorPlacement: "top-bottom"
}), $(window).scroll(function () {
    var e = $(this).scrollTop();
    $(".about_content_dish").css({
        transform: "translate(0%, -" + e / 80 + "%)"
    })
});
var json = new XMLHttpRequest;
json.open("GET", "basket.json", !0), json.send(), json.onreadystatechange = function () {
    if (4 === json.readyState && 200 === json.status) {
        console.log("state = 4");
        var e = JSON.parse(json.responseText),
            t = 0;
        $(".price span").text(+t.toFixed(2));
        var a = $(".basket_item_area"),
            s = 0,
            n = [];
        a.append("<p class = 'basket_empty'>Корзина пуста</p>"), $(".price span").text(+t.toFixed(2));
        var i = function (e) {
                a.empty();
                var s = 0;
                n.length > 5 ? $(".basket_item_area").css({
                    height: "270px",
                    overflow: "scroll",
                    "overflow-x": "hidden"
                }) : $(".basket_item_area").css({
                    height: "auto",
                    overflow: "hidden",
                    "overflow-x": "hidden"
                });
                for (var i of n) {
                    var o = $("<div/>", {
                            class: "basket_item",
                            id: i.id
                        }),
                        d = "<h4 class = 'basket_item_title'>" + i.title + "</h4>",
                        r = "<p class='basket_item_price'><span class='basket_item_count'>" + i.count + "</span> x <span class = 'basket_item_price4one'>" + i.priceOne.toFixed(2) + "</span></p>",
                        c = "<a href=' ' class = 'basket_item_delete' data-index = " + s + " id = '" + i.id + "'><i class='fas fa-times-circle basket_item_remove'></i></a>";
                    $(".price span").empty(), $(".price span").text(+t.toFixed(2)), s++, o.append(d), o.append(r), o.append(c), a.append(o)
                }
            },
            o = 0,
            d = function () {
                a.empty(), $(".price span").empty(), $(".price span").text(+t.toFixed(2)), i()
            },
            r = $("<ul/>", {
                class: "addNot_list"
            }),
            c = [],
            l = function (e, t) {
                var a = {
                        id: e = e,
                        title: t = t
                    },
                    s = $("<li/>", {
                        class: "addNot_list_item",
                        id: "added-" + e
                    }),
                    n = $("<div/>", {
                        class: "addedProduct"
                    }),
                    i = $("<p/>", {
                        class: "addedProductText",
                        id: "added-text-" + e,
                        text: "Added: " + t
                    });
                c.push(a), n.append(i), s.append(n), r.append(s), $("body").append(r)
            };
        $(".rmenu_content_item_btn").on("click", function () {
            var a, d, r = parseInt($(this).attr("data-id"));
            for (var c of e.basket) parseInt(c.id) == r && (a = c.title, d = parseFloat(c.price));
            ! function (e, a, d) {
                a = a, d = d;
                [].push(e = e);
                for (var r = {
                        id: e,
                        title: a,
                        price: d,
                        priceOne: d,
                        count: 1
                    }, c = 0; c < n.length; c++) n[c].id === e && (r.count = n[c].count, r.price = n[c].priceOne, r.priceOne += r.price, r.count++, n.splice(c, 1));
                s++, t += d, n.push(r), i(), o = Math.floor(5e3 * Math.random()), l(o, a), $("#added-" + o).fadeOut(2e3), n.length > 0 && $(".basket_empty").remove()
            }(r, a, d)
        }), $(".basket_item_area").on("click", ".basket_item_delete", function (e) {
            e.preventDefault(),
                function (e) {
                    s--, t -= parseFloat(n[e].priceOne), n.splice(e, 1), d(), 0 == n.length && a.append("<p class = 'basket_empty'>Корзина пуста</p>")
                }(+$(this).data("index"))
        })
    } else console.log("status is not 4")
};
