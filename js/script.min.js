"use strict";
$(".main_btn").on("click", function (e) {
    e.preventDefault()
}), $("a").on("click", function (e) {
    e.preventDefault()
}), $(".swipe_btn").click(function () {
    return $("html, body").animate({
        scrollTop: 0
    }, 500), !1
}), $('a[href*="#"]').on("click", function (e) {
    $("html,body").animate({
        scrollTop: $($(this).attr("href")).offset().top + 3
    }, 1200)
}), $(".header_card_link").on("click", function (e) {
    e.preventDefault(), $(".basket_drop").fadeToggle()
}), $("#contact_content_form_table").on("click", function () {
    $("#res_table").fadeToggle(700)
}), $(document).on("scroll", function () {
    var e = $(this).scrollTop();
    e >= 120 ? ($(".header_card").addClass("fixed"), $(".header").addClass("fixed"), $(".header_card").addClass("fixed")) : ($(".header_card").removeClass("fixed"), $(".header").removeClass("fixed"), $(".header_card").removeClass("fixed")), e >= 500 ? $(".swipe_btn").fadeIn(400) : $(".swipe_btn").fadeOut(400)
}), AOS.init({
    disable: !1,
    startEvent: "DOMContentLoaded",
    initClassName: "aos-init",
    animatedClassName: "aos-animate",
    useClassNames: !1,
    disableMutationObserver: !1,
    debounceDelay: 50,
    throttleDelay: 99,
    offset: 100,
    delay: 3,
    duration: 1500,
    easing: "ease",
    once: !0,
    mirror: !1,
    anchorPlacement: "top-bottom"
}), $(window).scroll(function () {
    var e = $(this).scrollTop();
    $(".about_content_dish").css({
        transform: "translate(0%, -" + e / 80 + "%)"
    })
});
var json = new XMLHttpRequest;
json.open("GET", "basket.json", !0), json.send(), json.onreadystatechange = function () {
    if (4 === json.readyState && 200 === json.status) {
        console.log("state = 4");
        var e = JSON.parse(json.responseText),
            t = 0;
        $(".price span").text(+t.toFixed(2));
        var a = $(".basket_item_area"),
            s = $("#select_dishes"),
            n = 0,
            i = [];
        a.append("<p class = 'basket_empty'>Корзина пуста</p>"), $(".price span").text(+t.toFixed(2));
        var o = function (e) {
                a.empty(), s.empty();
                var n = 0;
                i.length > 5 ? $(".basket_item_area").css({
                    height: "270px",
                    overflow: "scroll",
                    "overflow-x": "hidden"
                }) : $(".basket_item_area").css({
                    height: "auto",
                    overflow: "hidden",
                    "overflow-x": "hidden"
                });
                for (var o of i) {
                    var d = $("<div/>", {
                            class: "basket_item",
                            id: o.id
                        }),
                        r = $("<option/>", {
                            id: o.id,
                            text: o.id + "  |  " + o.title + "  |  " + o.count + "  |  " + o.priceOne + "  |  "
                        }),
                        c = "<h4 class = 'basket_item_title'>" + o.title + "</h4>",
                        l = "<p class='basket_item_price'><span class='basket_item_count'>" + o.count + "</span> x <span class = 'basket_item_price4one'>" + o.priceOne.toFixed(2) + "</span></p>",
                        p = "<a href=' ' class = 'basket_item_delete' data-index = " + n + " id = '" + o.id + "'><i class='fas fa-times-circle basket_item_remove'></i></a>";
                    $(".price span").empty(), $(".price span").text(+t.toFixed(2)), n++, s.append(r), d.append(c), d.append(l), d.append(p), a.append(d)
                }
            },
            d = 0,
            r = function () {
                a.empty(), $(".price span").empty(), $(".price span").text(+t.toFixed(2)), o()
            },
            c = $("<ul/>", {
                class: "addNot_list"
            }),
            l = [],
            p = function (e, t) {
                var a = {
                        id: e = e,
                        title: t = t
                    },
                    s = $("<li/>", {
                        class: "addNot_list_item",
                        id: "added-" + e
                    }),
                    n = $("<div/>", {
                        class: "addedProduct"
                    }),
                    i = $("<p/>", {
                        class: "addedProductText",
                        id: "added-text-" + e,
                        text: "Added: " + t
                    });
                l.push(a), n.append(i), s.append(n), c.append(s), $("body").append(c)
            };
        $(".rmenu_content_item_btn").on("click", function () {
            var a, s, r = parseInt($(this).attr("data-id"));
            for (var c of e.basket) parseInt(c.id) == r && (a = c.title, s = parseFloat(c.price));
            ! function (e, a, s) {
                a = a, s = s;
                [].push(e = e);
                for (var r = {
                        id: e,
                        title: a,
                        price: s,
                        priceOne: s,
                        count: 1
                    }, c = 0; c < i.length; c++) i[c].id === e && (r.count = i[c].count, r.price = i[c].priceOne, r.priceOne += r.price, r.count++, i.splice(c, 1));
                n++, t += s, i.push(r), o(), d = Math.floor(5e3 * Math.random()), p(d, a), $("#added-" + d).fadeOut(2e3), i.length > 0 && $(".basket_empty").remove()
            }(r, a, s)
        }), $(".basket_item_area").on("click", ".basket_item_delete", function (e) {
            e.preventDefault(),
                function (e) {
                    n--, t -= parseFloat(i[e].priceOne), i.splice(e, 1), r(), 0 == i.length && a.append("<p class = 'basket_empty'>Корзина пуста</p>")
                }(+$(this).data("index"))
        })
    } else console.log("status is not 4")
};
